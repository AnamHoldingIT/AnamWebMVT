{% extends "admin-panel/base_admin.html" %}
{% load static %}

{% block title %}لیست درخواست‌ها{% endblock %}
{% block menu_contracts %}active{% endblock %}

{% block content %}

<h2 class="page-title">درخواست‌های شتاب‌دهی</h2>

<div class="search-box mt-3 mb-4">
    <i class="bi bi-search"></i>
    <input type="text" id="searchInput" placeholder="جستجو بر اساس نام، شماره تماس یا استارتاپ...">
</div>

<div class="table-responsive contract-table-wrapper">
    <table class="table table-dark table-striped table-hover align-middle contract-table">
        <thead>
        <tr>
            <th>نام</th>
            <th>موبایل</th>
            <th>استارتاپ</th>
            <th>توضیحات</th>
            <th>وضعیت</th>
            <th>عملیات</th>
        </tr>
        </thead>

        <tbody>
        {% for item in contracts %}
            <tr>
                <td>{{ item.full_name }}</td>
                <td>{{ item.phone }}</td>
                <td>{{ item.startup_name }}</td>
                <td>{{ item.detail|truncatechars:40 }}</td>

                <td>
                    {% if item.status == "new" %}
                        <span class="badge bg-warning text-dark">در انتظار</span>
                    {% elif item.status == "done" %}
                        <span class="badge bg-success">تایید شده</span>
                    {% else %}
                        <span class="badge bg-info text-dark">در حال بررسی</span>
                    {% endif %}
                </td>

                <td>
                    <a href="{% url 'admin_panel:contract_detail' item.pk %}" class="btn btn-sm btn-outline-light">
                        مشاهده
                    </a>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="6" class="text-center text-muted">هیچ درخواستی ثبت نشده است.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
