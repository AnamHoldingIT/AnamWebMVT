{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}داشبورد مدیریت{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'css/admin.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    {% block extra_css %}{% endblock %}
</head>

<body>

<div class="admin-container">

    <aside class="sidebar">
        <div class="brand">
            <img src="{% static 'image/logo/AnamLogo.PNG' %}" alt="">
            <h6>پنل مدیریت آنام</h6>
        </div>

        <nav>
            {# اگر کاربر ادمین عادی یا سوپریوزر بود، این منو را ببیند #}
            {% if request.user.is_superuser or request.user.role == 'admin' %}
                <a href="{% url 'admin_panel:dashboard' %}" class="{% block menu_dashboard %}{% endblock %}">
                    <i class="bi bi-speedometer2"></i> داشبورد
                </a>

                <a href="{% url 'admin_panel:contracts' %}" class="{% block menu_contracts %}{% endblock %}">
                    <i class="bi bi-envelope-paper"></i> درخواست‌ها
                </a>
            {% endif %}

            {# بخش Recode برای همه (شامل ادمین بیننده) باز است #}
            <a href="{% url 'admin_panel:recode_list' %}" class="{% block menu_recode %}{% endblock %}">
                <i class="bi bi-cpu"></i> Recode
            </a>

            {# بقیه بخش‌ها فقط برای ادمین اصلی #}
            {% if request.user.is_superuser or request.user.role == 'admin' %}
                <a href="{% url 'admin_panel:worklog_projects' %}"
                   class="{% block menu_worklog_projects %}{% endblock %}">
                    <i class="bi bi-folder-check"></i> پروژه‌ها
                </a>

                <a href="{% url 'admin_panel:worklog_status_overview' %}"
                   class="{% block menu_status_overview %}{% endblock %}">
                    <i class="bi bi-display"></i> آمار روزانه
                </a>

                <a href="{% url 'admin_panel:worklog_plans' %}" class="{% block menu_worklog_plans %}{% endblock %}">
                    <i class="bi bi-calendar-week"></i> برنامه ها
                </a>

                <a href="{% url 'admin_panel:worklog_reports' %}"
                   class="{% block menu_worklog_reports %}{% endblock %}">
                    <i class="bi bi-file-earmark-text"></i> گزارشات
                </a>

                <a href="{% url 'admin_panel:portfolio_projects' %}" class="{% block menu_portfolio %}{% endblock %}">
                    <i class="bi bi-briefcase"></i> پورتفوی
                </a>

                <a href="{% url 'admin_panel:users' %}" class="{% block menu_users %}{% endblock %}">
                    <i class="bi bi-people"></i> کاربران
                </a>
            {% endif %}

            <a href="{% url 'accounts:logout' %}" class="logout">
                <i class="bi bi-box-arrow-right"></i> خروج
            </a>

        </nav>
    </aside>

    <main class="main">
        {% block content %}
        {% endblock %}
    </main>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}

</body>
</html>